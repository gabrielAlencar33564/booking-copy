<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0,0"
    />
    <link rel="stylesheet" href="../styles/main.css" />
    <link rel="stylesheet" href="../styles/layout/your-data.css" />
  </head>
  <body>
    <header class="header-container">
      <div class="header-content">
        <div class="primary">
          <div class="logo" id="logo-header">Logo</div>

          <button class="btn u-primary-btn variant-one">BRL</button>
          <button class="btn u-primary-btn variant-one">
            <span class="material-symbols-outlined"> flag_circle </span>
          </button>
          <button class="btn u-primary-btn variant-one">
            <span class="material-symbols-outlined"> help </span>
          </button>
          <button class="btn u-primary-btn variant-one">Anuncie sua propriedade</button>
        </div>
      </div>
    </header>

    <main class="your-data">
      <nav class="stepper" aria-label="Progresso da reserva">
        <ol class="stepper__list">
          <li class="stepper__item is-complete">
            <span class="stepper__bullet" aria-hidden="true">
              <svg viewBox="0 0 16 16" class="stepper__check" width="12" height="12">
                <path
                  d="M6.6 10.6 3.9 7.9l-1 1 3.7 3.7 7-7-1-1-6 6z"
                  fill="currentColor"
                />
              </svg>
            </span>
            <span class="stepper__label">Sua escolha</span>
            <span class="stepper__line" aria-hidden="true"></span>
          </li>

          <li class="stepper__item is-complete">
            <span class="stepper__bullet" aria-hidden="true">
              <svg viewBox="0 0 16 16" class="stepper__check" width="12" height="12">
                <path
                  d="M6.6 10.6 3.9 7.9l-1 1 3.7 3.7 7-7-1-1-6 6z"
                  fill="currentColor"
                />
              </svg>
            </span>
            <span class="stepper__label">Seus dados</span>
            <span class="stepper__line" aria-hidden="true"></span>
          </li>

          <li class="stepper__item is-current">
            <span class="stepper__bullet" aria-hidden="true">3</span>
            <span class="stepper__label">Concluir reserva</span>
            <span class="stepper__line" aria-hidden="true"></span>
          </li>
        </ol>
        <span class="stepper__label-mobile">Seus dados</span>
      </nav>

      <div class="page-container">
        <div class="page-content">
          <div class="col-one">
            <div class="your-data__card hotel-card">
              <img src="" alt="" class="hotel-card__image" />
              <div class="hotel-card__details">
                <h3 class="hotel-card__title your-data__card-title"></h3>
                <p class="hotel-card__address"></p>
                <p class="hotel-card__location"></p>
                <div class="hotel-card__review">
                  <div class="review-badge hotel-card__review-badge"></div>
                  <div class="hotel-card__review-title">
                    <p class="hotel-card__review-title-title"></p>
                    <p class="hotel-card__review-title-subtitle"></p>
                  </div>
                </div>
                <div class="hotel-card__amenities"></div>
              </div>
            </div>

            <div
              class="your-data__card your-data__card-padding hotel-card-booking-details"
            >
              <p class="your-data__card-title">Dados de sua reserva</p>

              <div class="hotel-card-booking-details__scheduling">
                <div class="hotel-card-booking-details__prohibited">
                  <p>Entrada</p>
                  <p></p>
                  <p>14:00 – 00:00</p>
                </div>
                <div class="hotel-card-booking-details__exit">
                  <p>Saída</p>
                  <p></p>
                  <p>08:00 – 12:00</p>
                </div>
              </div>
              <p class="hotel-card-booking-details__duration-label">
                Duração total da hospedagem:
              </p>
              <p class="hotel-card-booking-details__duration-value"></p>
            </div>

            <div class="your-data__card hotel-card-price">
              <p class="your-data__card-title hotel-card-price__title">Resumo do preço</p>

              <div>
                <p class="hotel-card-price__price">
                  <span>Total</span>
                  <span></span>
                </p>
                <p class="hotel-card-price__info">Impostos e taxas incluídos</p>
              </div>
            </div>

            <div class="your-data__card hotel-card-installment your-data__card-padding">
              <p class="your-data__card-title">Quanto custa para cancelar?</p>
              <p class="your-data__card-subtitle">
                <span>Se você cancelar, terá que pagar</span>
                <span></span>
              </p>
            </div>

            <div
              class="your-data__card hotel-card-payment-details your-data__card-padding"
            >
              <p class="your-data__card-title">Dados de pagamento</p>
              <p class="your-data__card-subtitle">
                <span>A acomodação vai cobrar de você</span>
                <span id="datePrice"></span>
              </p>
            </div>

            <div
              class="your-data__card hotel-card-payment-details your-data__card-padding your-data__card-grid-separator"
            >
              <p class="your-data__card-title">Você tem um código promocional?</p>
              <div class="form-field">
                <label for="promotionalCode">Insira seu código promocional</label>
                <input type="text" id="promotionalCode" name="promotionalCode" required />
              </div>

              <button class="btn btn-primary">Aplicar</button>
            </div>
          </div>

          <div class="col-two">
            <div
              class="your-data__card your-data__card-padding your-data__card-grid-separator pay-during-your-stay"
            >
              <h3 class="your-data__card-title-strong">Pagar durante a estadia</h3>

              <p>
                A acomodação cuidará do pagamento. A data da cobrança depende das suas
                condições de reserva.
              </p>

              <img src="https://i.postimg.cc/q79WDMKG/logo-pix.png" alt="Pix" />
            </div>

            <div
              class="your-data__card your-data__card-padding your-data__card-grid-separator"
            >
              <h3 class="your-data__card-title-strong">Como você gostaria de pagar?</h3>

              <div class="payment-option">
                <input id="pay_pix" class="option-input" type="checkbox" />
                <label class="option-card" for="pay_pix">
                  <span class="corner-check" aria-hidden="true">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path d="M5 12.5l4 4 10-10" />
                    </svg>
                  </span>

                  <span class="brand-wrap">
                    <img src="https://i.postimg.cc/q79WDMKG/logo-pix.png" alt="Pix" />
                  </span>
                </label>
                <div class="option-title">Pix</div>
              </div>
            </div>

            <div class="your-data__card-terms">
              <div class="form-field checkbox-field">
                <input
                  type="checkbox"
                  id="loginAndEconomize"
                  name="loginAndEconomize"
                  checked
                />
                <label for="loginAndEconomize" class="checkbox-field__label">
                  Autorizo o recebimento de e-mails de marketing da Booking.com, incluindo
                  promoções, recomendações personalizadas, recompensas, experiências de
                  viagem e atualizações sobre os produtos e serviços da Booking.com.
                </label>
              </div>

              <p class="your-data__card-terms-p-one">
                Ao se inscrever, você nos permite personalizar ofertas e conteúdos de
                acordo com os seus interesses, monitorando como você usa a Booking.com por
                meio de tecnologias de rastreamento. Cancele a inscrição a qualquer
                momento por meio das configurações da sua conta ou do link em qualquer
                e-mail de marketing. Leia a nossa
                <a href="" class="link link-strong">política de privacidade</a>.
              </p>

              <p class="your-data__card-terms-p-two">
                Sua reserva é feita diretamente com Recanto Praia Grande. Ao concluir essa
                reserva, você concorda com as
                <a href="" class="link link-underline link-strong">condições da reserva</a
                >, os
                <a href="" class="link link-underline link-strong">termos gerais</a> , a
                <a href="" class="link link-underline link-strong"
                  >política de privacidade</a
                >
                e os
                <a href="" class="link link-underline link-strong">termos da Wallet</a>.
              </p>
            </div>

            <div class="your-data__buttons">
              <div>
                <a id="complete-reservation" class="btn btn-primary" href="#">
                  <span class="material-symbols-outlined"> lock </span>
                  <span>Concluar a reserva</span>
                </a>
              </div>
              <a class="btn btn-overlay booking-conditions-button" href="#">
                Quais são as condições da minha reserva?
              </a>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-legal">
          <p class="copy">
            Direitos autorais © 1996–2025 Booking.com. Todos os direitos reservados.
          </p>
        </div>
      </div>
    </footer>
  </body>

  <script src="../data/overview.data.js"></script>

  <script src="../javascript/overview.js"></script>
  <script src="../javascript/property.js"></script>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      try {
        initOverview({ rootSelector: "#overview", data: window.DATASETS?.property });
      } catch {}
    });
  </script>

  <script>
    (function () {
      const $ = (s, r = document) => r.querySelector(s);
      const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));

      function getCompleteBtn() {
        return document.getElementById("complete-reservation");
      }

      function getPaymentInputs() {
        return $$(
          '.payment-option input[type="checkbox"], .payment-option input[type="radio"]'
        );
      }

      function setBtnDisabled(btn, disabled) {
        if (!btn) return;
        btn.setAttribute("aria-disabled", disabled ? "true" : "false");
        btn.dataset.disabled = disabled ? "1" : "0";
        if (disabled) {
          btn.classList.add("is-disabled");
          btn.setAttribute("tabindex", "-1");
          btn.style.pointerEvents = "auto";
        } else {
          btn.classList.remove("is-disabled");
          btn.removeAttribute("tabindex");
          btn.style.pointerEvents = "";
        }
      }

      function anyPaymentSelected() {
        return getPaymentInputs().some((el) => el.checked);
      }

      function updateButtonState() {
        const btn = getCompleteBtn();
        setBtnDisabled(btn, !anyPaymentSelected());
      }

      function isValidISODate(s) {
        if (!/^\d{4}-\d{2}-\d{2}$/.test(s)) return false;
        const d = new Date(s + "T00:00:00Z");
        return !isNaN(d.getTime()) && s === d.toISOString().slice(0, 10);
      }

      function getNightsFromQuery() {
        const qs = new URLSearchParams(location.search);
        const checkin = qs.get("checkin") || "";
        const checkout = qs.get("checkout") || "";
        if (!isValidISODate(checkin) || !isValidISODate(checkout)) return null;

        const inUTC = Date.parse(checkin + "T00:00:00Z");
        const outUTC = Date.parse(checkout + "T00:00:00Z");
        const ms = outUTC - inUTC;
        const nights = Math.floor(ms / 86400000);
        return nights > 0 ? nights : null;
      }

      function resolveRedirectUrl() {
        const list = window.APP_DATA?.property?.completeReservationUrl;
        if (!Array.isArray(list) || list.length === 0) return null;

        const nights = getNightsFromQuery();
        if (!nights) {
          return list[0] || null;
        }
        const idx = Math.max(0, Math.min(list.length - 1, nights - 1));
        return list[idx] || null;
      }

      function go(url) {
        try {
          const target = new URL(url, location.href);
          window.location.assign(target.toString());
        } catch {
          window.location.href = url;
        }
      }

      function init() {
        const btn = getCompleteBtn();
        const inputs = getPaymentInputs();
        if (!btn) return;

        updateButtonState();

        inputs.forEach((el) => {
          el.addEventListener("change", updateButtonState);
          el.addEventListener("input", updateButtonState);
        });

        btn.addEventListener("click", (e) => {
          if (btn.getAttribute("aria-disabled") === "true") {
            e.preventDefault();
            return;
          }
          e.preventDefault();

          const url = resolveRedirectUrl();
          if (url) {
            go(url);
          } else {
            alert("Não foi possível determinar o link de conclusão da reserva.");
          }
        });
      }

      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", init);
      } else {
        init();
      }
    })();
  </script>
</html>
